---
import { getCollection, getEntry } from "astro:content";
import Layout from "../../../layouts/project.astro";
import addLangPaths from "../../../lib/utils/add-lang-paths";
import { t } from "../../../lib/utils/il8n";

export async function getStaticPaths() {
  const collection = t(Astro) !== "es" ? "projects-en" : "projects-es";
  const projects = await getCollection(collection);
  return addLangPaths(
    projects.map((post) => {
      return {
        params: { slug: post.slug },
      };
    })
  );
}

const { slug } = Astro.params;
const collection = t(Astro) !== "es" ? "projects-en" : "projects-es";
const project = await getEntry(collection, slug);
const { Content } = await project.render();
---

<Layout project={project}>
  <Content />
</Layout>
